{
  "manifestVersion": "1",
  "name": "native-emit-install",
  "version": "1.0.0",
  "description": "Xahau Hook 101 Example - Install Native Emit. Emits native payments when incoming XAH matches exact amount.",
  "publisher": "rN7n7otQDd6FczFgLdSqtcsAUxDkw6fzRH",
  "repo": "https://github.com/Handy4ndy/NativeEmitInstall",
  "license": "MIT",
  "networks": ["xahau-testnet"],
  
  "roles": {
    "installer": {
      "label": "Hook Account",
      "description": "The account that will install and run this hook"
    }
  },
  
  "userConfig": {
    "exactAmount": {
      "label": "Exact Amount to Receive (XAH)",
      "inputType": "uint64",
      "encoding": "uint64",
      "default": "5",
      "endianness": "BE",
      "description": "The exact amount in XAH that must be received to trigger the emit (e.g., 5 for 5 XAH)",
      "required": true,
      "validation": {
        "min": 1,
        "max": 1000000
      }
    },
    "emitAmount": {
      "label": "Amount to Emit (XAH)",
      "inputType": "uint64",
      "encoding": "uint64",
      "default": "2",
      "endianness": "BE",
      "description": "The amount in XAH to emit when triggered (e.g., 2 for 2 XAH)",
      "required": true,
      "validation": {
        "min": 1,
        "max": 1000000
      }
    },
    "recipientAccount": {
      "label": "Recipient Account",
      "inputType": "account",
      "encoding": "hex",
      "default": "rN7n7otQDd6FczFgLdSqtcsAUxDkw6fzRH",
      "description": "The account that will receive the emitted payment",
      "required": true,
      "validation": {
        "pattern": "^r[A-Za-z0-9]{25,34}$"
      }
    }
  },
  
  "hooks": [
    {
      "id": "install-native-emit",
      "artifact": {
        "toolchain": "hooks-c",
        "source_path": "src/hook.c"
      },
      "HookOn": ["PAYMENT"],
      "HookCanEmit": ["PAYMENT"],
      "HookNamespace": "0000000000000000000000000000000000000000000000000000000000000000",
      "HookParameters": [
        {
          "HookParameterName": "AMT_IN",
          "HookParameterValue": {
            "type": "userConfig",
            "value": "{{exactAmount}}"
          }
        },
        {
          "HookParameterName": "AMT_OUT",
          "HookParameterValue": {
            "type": "userConfig",
            "value": "{{emitAmount}}"
          }
        },
        {
          "HookParameterName": "F_ACC",
          "HookParameterValue": {
            "type": "userConfig",
            "value": "{{recipientAccount}}"
          }
        }
      ],
      "abi": {
        "notes": "INE (Install Native Emit) hook: Validates incoming XAH payments against configured exact amount, then emits outgoing payment to configured recipient. All hook parameters are installer-trusted and required. No otxn parameters or state management.",
        "hookParameters": [
          {
            "name": "AMT_IN",
            "description": "Expected incoming payment amount in XAH (drops converted to XAH units). Must be non-zero. Validated against actual transaction amount.",
            "selector": [
              {
                "type": "VarString",
                "pattern": "AMT_IN",
                "patternEncoding": "ascii"
              }
            ],
            "data": [
              {
                "type": "UInt64",
                "label": "amount_xah",
                "notes": "Non-zero XAH amount. Will be multiplied by 1,000,000 to convert to drops for comparison."
              }
            ]
          },
          {
            "name": "AMT_OUT",
            "description": "Outgoing payment amount in XAH to emit to recipient account. Must be non-zero.",
            "selector": [
              {
                "type": "VarString",
                "pattern": "AMT_OUT",
                "patternEncoding": "ascii"
              }
            ],
            "data": [
              {
                "type": "UInt64",
                "label": "amount_xah",
                "notes": "Non-zero XAH amount. Will be multiplied by 1,000,000 to convert to drops for emitted transaction."
              }
            ]
          },
          {
            "name": "F_ACC",
            "description": "Recipient account for emitted payment. Must differ from hook account to prevent self-payment.",
            "selector": [
              {
                "type": "VarString",
                "pattern": "F_ACC",
                "patternEncoding": "ascii"
              }
            ],
            "data": [
              {
                "type": "AccountID",
                "label": "recipient_account",
                "notes": "20-byte account ID. Validated to be different from hook account."
              }
            ]
          }
        ]
      }
    }
  ],
  
  "install": [
    {
      "TransactionType": "SetHook",
      "description": "Install the Native Emit hook with configured parameters",
      "required": true,
      "role": "installer",
      "hookIds": ["install-native-emit"]
    }
  ],
  
  "logo": "logo.png",
  "banner": "banner.png",
  "icon": "icon.png",
  "tags": ["education", "hooks101", "emit", "native", "payment", "tutorial"],
  "documentation": {
    "readme": "README.md"
  }
}